C51 COMPILER V9.57.0.0   ARM                                                               12/08/2021 15:09:08 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE ARM
OBJECT MODULE PLACED IN .\Objects\arm.obj
COMPILER INVOKED BY: D:\keil5B\C51\BIN\C51.EXE arm.c COMPACT OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\arm.lst) TABS(2) OBJECT(.\Objects\arm.obj)

line level    source

   1          /*
   2           * @Author: your name
   3           * @Date: 2021-11-17 07:31:44
   4           * @LastEditTime: 2021-11-21 09:08:10
   5           * @LastEditors: Please set LastEditors
   6           * @Description: æ‰“å¼€koroFileHeaderæŸ¥çœ‹é…ç½® è¿›è¡Œè®¾ç½®: https://github.com/OBKoro1/koro1FileHeader
             -/wiki/%E9%85%8D%E7%BD%AE
   7           * @FilePath: \æœºæ¢°è‡‚\arm.c
   8           */
   9          #include <reg52.h>
  10          //#include "engine.h"
  11          #include "key.h"//çŸ©é˜µé”®ç›˜
  12          #include "oled.h"
  13          #include "Uart.h"//è“ç‰™è¯†åˆ«
  14          #include "TuringServo.h"
  15          sbit sw=P2^7;
  16          unsigned char code di_09[][8]={//0~9
  17          {0x00,0x3E,0x41,0x41,0x41,0x41,0x3E,0x00}//"0",0
  18          /* (8 X 8 , æ–°å®‹ä½“ ) */
  19          ,{0x00,0x00,0x00,0x00,0x41,0x7F,0x00,0x00}//"1",1
  20          /* (8 X 8 , æ–°å®‹ä½“ ) */
  21          ,{0x00,0x00,0x42,0x61,0x51,0x49,0x49,0x46}//"2",2
  22          /* (8 X 8 , æ–°å®‹ä½“ ) */
  23          ,{0x00,0x00,0x22,0x41,0x41,0x49,0x4F,0x32}//"3",3
  24          /* (8 X 8 , æ–°å®‹ä½“ ) */
  25          ,{0x00,0x00,0x18,0x14,0x12,0x51,0x7F,0x00}//"4",4
  26          /* (8 X 8 , æ–°å®‹ä½“ ) */
  27          ,{0x00,0x2E,0x49,0x45,0x45,0x49,0x39,0x00}//"5",5
  28          /* (8 X 8 , æ–°å®‹ä½“ ) */
  29          ,{0x00,0x3E,0x49,0x45,0x45,0x49,0x38,0x00}//"6",6
  30          /* (8 X 8 , æ–°å®‹ä½“ ) */
  31          ,{0x00,0x03,0x01,0x71,0x09,0x07,0x01,0x00}//"7",7
  32          /* (8 X 8 , æ–°å®‹ä½“ ) */
  33          ,{0x00,0x36,0x4D,0x49,0x49,0x49,0x36,0x00}//"8",8
  34          /* (8 X 8 , æ–°å®‹ä½“ ) */
  35          ,{0x00,0x4E,0x49,0x51,0x51,0x29,0x1E,0x00}//"9",9
  36          /* (8 X 8 , æ–°å®‹ä½“ ) */
  37          };
  38          unsigned char code di_abcd[][8]={//a~d,'on','off'
  39          {0x00,0x68,0x54,0x54,0x54,0x38,0x40,0x40}//"a",0
  40          /* (8 X 8 , æ–°å®‹ä½“ ) */
  41          
  42          ,{0x00,0x00,0x7F,0x48,0x44,0x44,0x44,0x38}//"b",1
  43          /* (8 X 8 , æ–°å®‹ä½“ ) */
  44          
  45          ,{0x00,0x00,0x38,0x44,0x44,0x44,0x48,0x28}//"c",2
  46          /* (8 X 8 , æ–°å®‹ä½“ ) */
  47          
  48          ,{0x00,0x00,0x38,0x44,0x44,0x44,0x44,0x7F}//"d",3
  49          /* (8 X 8 , æ–°å®‹ä½“ ) */
  50          ,{0x00,0x38,0x54,0x54,0x54,0x54,0x18,0x00}//"e",4
  51          /* (8 X 8 , æ–°å®‹ä½“ ) */
  52          
  53          ,{0x00,0x00,0x04,0x44,0x7E,0x45,0x05,0x01}//"f",5
C51 COMPILER V9.57.0.0   ARM                                                               12/08/2021 15:09:08 PAGE 2   

  54          /* (8 X 8 , æ–°å®‹ä½“ ) */
  55          
  56          ,{0x00,0x00,0x38,0x44,0x44,0x44,0x38,0x00}//"o",6
  57          /* (8 X 8 , å®‹ä½“ ) */
  58          
  59          ,{0x00,0x04,0x7C,0x08,0x04,0x04,0x78,0x00}//"n",7
  60          /* (8 X 8 , å®‹ä½“ ) */
  61          
  62          ,{0x10,0xFE,0x12,0x00,0x10,0xFE,0x12,0x00}//"ff"8
  63          };
  64          unsigned char code show1[][8] ={//â€œå‡¸â€
  65                  0x78, 0x4E, 0x42, 0x42, 0x42, 0x42, 0x4E, 0x78
  66          };
  67          void delay(void) {//å»¶æ—¶1s
  68   1          unsigned char a, b, c;
  69   1          for (c = 167; c > 0; c--)
  70   1              for (b = 171; b > 0; b--)
  71   1                  for (a = 16; a > 0; a--)
  72   1                      ;
  73   1      }
  74          void main(void){
  75   1        int mode=0;//å“ªä½èˆµæœº
  76   1        int key=0;//ä¼ å›æ¥çš„æ•°æ®
  77   1        int a=0;//èˆµæœºè§’åº¦
  78   1        int tmp=0;
  79   1        int i=0,j=0;
  80   1        int now[3];//è®°å½•æœºæ¢°è‡‚ç°å§¿æ€ 0,1,2,3
  81   1        int  m[2][50];//å‚¨å­˜èˆµæœºçŠ¶æ€
  82   1        int swich=0;//ç¡®è®¤æ¨¡å¼çš„å¼€å…³ä½
  83   1        TMOD=0x00;
  84   1        oledInit();
  85   1        Uart_init();//åˆå§‹åŒ–ä¸²å£
  86   1        display(0,0,di_abcd,67);//å°±ç»ªæ ‡å¿—//==========æ˜¾ç¤º-'on'(0,0)
  87   1        while (1){
  88   2            /*=============================================================================*/
  89   2          if(sw==0){
  90   3            key=key4x4(); //çŸ©é˜µé”®ç›˜è¯†åˆ«
  91   3            display(4,0,di_abcd,68);
  92   3          }
  93   2      //      key=BluetoothGet();//è“ç‰™è¯†åˆ«
  94   2            if(sw==1){
  95   3            key=  BluetoothGetOnce();//è“ç‰™æŒç»­è¯†åˆ«
  96   3            display(4,0,di_abcd,67);
  97   3            }
  98   2              if(key!=-1)display(2,0,di_09,key);//==========æ˜¾ç¤º y=0 é”®çš„å€¼(1,0)
  99   2            /*key=0~3*/if(key>=0&&key<=3){mode=key;}//è¯†åˆ«å“ªä¸€ä½èˆµæœºã€ç¬¬(mode)ä½ã€‘
 100   2            /*=============================================================================*/
 101   2            /*è®°å¿†å‚¨å­˜key==7*/if(key==7){
 102   3            m[0][j]=mode;//å‚¨å­˜èˆµæœºä½
 103   3            m[1][j]=a;//å‚¨å­˜è§’åº¦
 104   3            display(0,1,di_09,m[0][j]);//==========æ˜¾ç¤º-y=1èˆµæœºä½
 105   3            display(3,1,di_09,j);//==========æ˜¾ç¤º-x=3,y=1å‚¨å­˜çš„æ¶²é¢è®¡
 106   3            display(0,2,di_09,m[1][j]/100);//==========æ˜¾ç¤º-x=1,y=2è§’åº¦çš„åƒï¼Œç™¾ä½
 107   3            display(1,2,di_09,m[1][j]%100);//==========æ˜¾ç¤º-x=1,y=2è§’åº¦çš„ä¸ªï¼Œåä½
 108   3            i++;
 109   3            j++;
 110   3            if(i>=8){i=0;}//é˜²æ­¢OLEDæº¢å‡º
 111   3            if(j>=50){j=0;}//ä¸€å…±å¯ä»¥å‚¨å­˜50ä¸ªåŠ¨ä½œï¼Œé˜²æ­¢è®°å¿†æº¢å‡º
 112   3            } 
 113   2            /*=============================================================================*/
 114   2              /*è®°å¿†è¾“å‡ºkey==6*/if(key==6){
 115   3                j--;
C51 COMPILER V9.57.0.0   ARM                                                               12/08/2021 15:09:08 PAGE 3   

 116   3                while(j>=0){
 117   4                        mode=m[0][j];//æå–èˆµæœºä½
 118   4                        a=m[1][j];//æå–è§’åº¦
 119   4      /*            for(tmp=0;tmp<7;tmp++){//forè¯­å¥ç”¨äºç¡®ä¿èˆµæœºèƒ½åŠ¨åˆ°æŒ‡å®šä½ç½®(ç›´æ¥èµ‹å€¼æ³•)
 120   4      //                  moves1(4,a,mode);//ç›´æ¥èµ‹å€¼æ³•
 121   4      //            }*/
 122   4                        moves2(now[mode],a,mode);//æ¯”è¾ƒå½“å‰å§¿æ€ä¸ç›®æ ‡å§¿æ€å¹¶å‡é€Ÿè¿åŠ¨(é€’è¿›èµ‹å€¼æ³•)
 123   4                        now[mode]=a;//æ›´æ–°å½“å‰å§¿æ€
 124   4                        display(0,3,di_09,mode);//==========æ˜¾ç¤º-y=3è¾“å‡ºèˆµæœºä½(0,3)
 125   4                        display(3,3,di_09,j);//==========æ˜¾ç¤º-x=3,y=3è¾“å‡ºçš„æ¶²é¢è®¡
 126   4                        display(0,4,di_09,a/100);//==========æ˜¾ç¤º-y=4è¾“å‡ºè§’åº¦çš„åƒï¼Œç™¾ä½
 127   4                        display(1,4,di_09,a%100);//==========æ˜¾ç¤º-x=1,y=2è§’åº¦çš„ä¸ªï¼Œåä½
 128   4                          j--;
 129   4                          delay();
 130   4                }
 131   3                j=0;
 132   3                i=0;
 133   3              }
 134   2            /*=============================================================================*/
 135   2              /*ç¡®è®¤æ¨¡å¼key==8*///---ä¸€åŠ¨ä¸åŠ¨ swich=0æ—¶å¯åŠ¨
 136   2              if(key==8){ 
 137   3                        if(swich==1){swich=0;display(0,5,di_abcd,68);}//==========swich==1,æ˜¾ç¤º-y=5å…³é—­-off
 138   3                        else if(swich==0){swich=1;display(0,5,di_abcd,67);}//==========swich==0,æ˜¾ç¤º-y=5å¯åŠ¨-on
 139   3                  }
 140   2            /*=============================================================================*/
 141   2            /*key=4~5å“åº”æ¨¡å¼(on)*/if(key==4&&swich==1){a=moves1(4,a,mode);now[mode]=a;}//æ­£è½¬
 142   2            else if(key==5&&swich==1){a=moves1(5,a,mode);now[mode]=a;}//åè½¬
 143   2            /*=============================================================================*/
 144   2            /*key=4~5ä¸å“åº”æ¨¡å¼(off)*/if(key==4&&swich==0){a+=50;if(a>2000){a=2000;}}//æ­£è½¬
 145   2            else if(key==5&&swich==0){a-=50;if(a<0){a=0;}}//åè½¬
 146   2            /*=============================================================================*/
 147   2            /*ç›‘è§†å™¨â€”mod,a*/
 148   2            display(0,6,di_09,mode);//==========æ˜¾ç¤º-y=6èˆµæœºä½
 149   2            display(0,7,di_09,a/100);//==========æ˜¾ç¤º-y=7è¾“å‡ºè§’åº¦çš„åƒï¼Œç™¾ä½
 150   2            display(1,7,di_09,a%100);//==========æ˜¾ç¤º-x=1,y=7è§’åº¦çš„ä¸ªï¼Œåä½
 151   2            /*=============================================================================*/
 152   2            if(key==9){fill_picture(0x00);  display(0,0,di_abcd,67);}//key==9æ—¶æ¸…å±//å°±ç»ªæ ‡å¿—//==========ä¹‹å
             -åªæ˜¾ç¤º-'on'(0,0)
 153   2          }
 154   1          }     
 155          
 156              
 157              


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1132    ----
   CONSTANT SIZE    =    160    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----     220
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
